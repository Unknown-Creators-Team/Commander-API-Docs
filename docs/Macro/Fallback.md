---
title: "Fallback マクロ"
last_update:
  date: 2025-12-21
  author: Nano191225
---

## 概要

**Fallback マクロ** は、マクロの展開に失敗した場合に代替値を返すマクロです。  
第一引数のマクロが正常に展開されればその値を、失敗すれば第二引数の値を返します。

## 構文

```plaintext
<!fallback=[マクロ値, 代替値]>
```

## パラメータ

| パラメータ | 説明 |
|---|---|
| `マクロ値` | 優先的に使用する値（通常は他のマクロ） |
| `代替値` | マクロ展開に失敗した場合に使用する値 |

## 戻り値

- マクロが正常に展開された場合: 第一引数の値を返します
- マクロの展開に失敗した場合: 第二引数の値を返します

## 使用例

### スコアのデフォルト値を設定

スコアが設定されていない場合、デフォルト値を表示します。

```mcfunction
/scriptevent capi:actionbar レベル: <!fallback=[<!score=level>, 1]>
```

**スコアが設定されている場合の出力**:
```
レベル: 42
```

**スコアが設定されていない場合の出力**:
```
レベル: 1
```

### ランク表示のデフォルト

プレイヤーのランクが設定されていない場合、「ビギナー」と表示します。

```mcfunction
/scriptevent capi:say ようこそ、<!fallback=[<!score=rank>, ビギナー]>ランクの<!name>さん！
```

**ランクが設定されている場合の出力**:
```
ようこそ、ゴールドランクのNotchさん！
```

**ランクが設定されていない場合の出力**:
```
ようこそ、ビギナーランクのNotchさん！
```

### 所持金の表示

所持金が未設定の場合、0円と表示します。

```mcfunction
/scriptevent capi:actionbar 所持金: <!fallback=[<!score=money>, 0]>円
```

**所持金が設定されている場合の出力**:
```
所持金: 1000円
```

**所持金が設定されていない場合の出力**:
```
所持金: 0円
```

### 複雑なデフォルト値

テキストや記号を含む複雑なデフォルト値も設定できます。

```mcfunction
/scriptevent capi:title <!fallback=[<!score=title>, §l§6デフォルトタイトル]>
```

## Void マクロとの違い

- **[Void マクロ](./Void.md)**: 失敗時に空文字列を返す
- **Fallback マクロ**: 失敗時に指定した代替値を返す

何も表示したくない場合は Void マクロ、特定のデフォルト値を表示したい場合は Fallback マクロを使用してください。

## 注意事項

- このマクロは Commander API のマクロ展開システムに依存しています
- マクロが `<...>` の形式で残っている場合のみ、代替値に切り替わります
- 第一引数が正常に展開されて空文字列を返す場合、それがそのまま使用されます（代替値は使用されません）
- 代替値には任意の文字列（数値、テキスト、装飾コードなど）を指定できます
